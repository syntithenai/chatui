(this["webpackJsonpchatui-example"]=this["webpackJsonpchatui-example"]||[]).push([[0],{140:function(e,t){e.exports=function(e){var t;onmessage=function(e){switch(e.data.command){case"init":o=e.data.inputSampleRate,t=o;break;case"process":!function(e){for(var o=0;o<e.length;o++)n.push(32767*e[o]);for(;16e3*n.length/t>512;){for(var a=new Int16Array(512),r=0,s=0,i=0,l=0;i<512;){for(r=0,s=0;l<Math.min(n.length,(i+1)*t/16e3);)r+=n[l],s++,l++;a[i]=r/s,i++}postMessage(a),n=n.slice(l)}}(e.data.inputFrame);break;case"reset":n=[]}var o};var n=[]}},142:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var o=n(0),a=n.n(o),r=n(146),s=n(56),i=n(145),l=n.n(i);var c=function(e){function t(t){e.sendUserMessage&&e.sendUserMessage(t)}var n=e.history,o="true"===localStorage.getItem("mute_chat");return a.a.createElement("div",{style:{border:"1px solid black",padding:"0.2em",width:"100%"}},n.length>0&&a.a.createElement("div",{className:"history",style:{padding:"0.2em",width:"100%",marginTop:"0.5em"}},[].concat(n).reverse().map((function(e,n){return a.a.createElement("div",{style:{borderTop:"3px solid black",marginTop:"0.1em",padding:"0.2em",width:"100%"},key:n},!1,e.user&&a.a.createElement("span",{style:{marginBottom:"1em",marginTop:"1em",padding:"0.2em",width:"100%"}},a.a.createElement("hr",null),a.a.createElement("b",null,"User: "),a.a.createElement("button",{onClick:function(){t(e.user)}},a.a.createElement("i",null,e.user))),Array.isArray(e.bot)&&a.a.createElement("div",null,e.bot.map((function(e,n){return a.a.createElement("div",{key:n},e&&e.utterance&&a.a.createElement("div",null,a.a.createElement("b",null,"Bot: "),a.a.createElement("span",null,e.utterance)),e&&e.buttons&&a.a.createElement("div",{style:{margin:"0.5em"}},e.buttons.map((function(e,n){return a.a.createElement("button",{key:n,onClick:function(n){n.preventDefault(),t(e.text?e.text:e.label)}},e.label)}))),e&&e.images&&a.a.createElement("div",{style:{margin:"0.5em"}},e.images.map((function(e,t){return a.a.createElement("img",{key:t,src:e.href,style:{width:"100%"}})}))),e&&e.texts&&a.a.createElement("div",{style:{margin:"0.5em"}},e.texts.map((function(e,t){return a.a.createElement("div",{key:t},e.text)}))),e&&e.audio&&a.a.createElement("div",{style:{margin:"0.5em"}},e.audio.map((function(e,t){return"true"!==e.autoplay||o?a.a.createElement("audio",{key:t,src:e.href,controls:!0}):a.a.createElement("div",{key:t})}))),e&&e.video&&a.a.createElement("div",{style:{margin:"0.5em"}},e.video.map((function(e,t){if("true"!==e.autoplay||o){var n=e&&e.href?void 0!==(i=(i=e.href).split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?i[2].split(/[^0-9a-z_\-]/i)[0]:i[0]:"";if(n){var r={playerVars:{start:e.start,end:e.end,controls:1,autoplay:0}};return a.a.createElement(s.a,{key:t,videoId:n,opts:r})}return a.a.createElement("video",{style:{height:"150px"},key:t,src:e.href,controls:!0})}return a.a.createElement("div",{key:t});var i}))),e&&e.frames&&a.a.createElement("div",{style:{margin:"0.5em"}},e.frames.map((function(e,t){return a.a.createElement("iframe",{style:{width:"100%",height:"400px"},key:t,src:e.href})}))))}))))}))))};function u(e){var t={position:"relative",backgroundColor:e.color?e.color:"grey",border:"2px solid black",borderRadius:"1em",height:"2em",width:"2em",textDecoration:"none",outline:"none"};return e.style&&(t=Object.assign(t,e.style)),a.a.createElement("button",{id:"microphone_button",onClick:function(t){t.preventDefault(),e.onClick&&e.onClick()},style:t},a.a.createElement("div",{style:{position:"relative",width:"85%",top:"0.1em",left:"0.1em"}},a.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"microphone",className:"svg-inline--fa fa-microphone fa-w-11",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},a.a.createElement("path",{fill:"currentColor",d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}))))}var p=n(287);try{window&&(window.WebsocketAsrClient=function(t){var o=n(289);console.log(["PORK",o,window.PorcupineManager]);var a=n(293);try{window.PorcupineManager=o}catch(C){}var r=null,s=!1,i=!1,l=!1,c=!1,u=null,f=window.AudioContext||window.webkitAudioContext,d=null,m=null,g=[],h={},y=new Float32Array([.9]);function v(){if(h.hasOwnProperty("hotwordStart")&&h.hotwordStart(),c=!0,!l){var e=o("./porcupine/porcupine_worker.js",!0);console.log(["PORK how",o,window.PorcupineManager,e]),e?(e.start(a,y,(function(e){e&&c&&(E(),h.hasOwnProperty("hotwordDetected")&&h.hotwordDetected(e),console.log("hotword DETECT"))}),(function(e){console.log(e)}),(function(){console.log("hotword ready"),h.hasOwnProperty("hotwordReady")&&h.hotwordReady()})),console.log("HOW STARYTED")):console.log("Hw no strart failed instant manager"),l=!0}}function w(){h.hasOwnProperty("hotwordStop")&&h.hotwordStop(),c=!1}function b(e){g.push(e),g.length>30&&g.shift()}function x(){if(r&&r.readyState===r.OPEN){for(var e in g)k(g[e]);g=[]}}function k(e){r&&r.readyState===r.OPEN&&r.send(e)}function E(){i=!0,(r=new WebSocket(t.server,"asr-audio")).onerror=function(){console.log("Connection Error")},r.onopen=function(){console.log("WebSocket Client Connected")},r.onclose=function(){console.log("echo-protocol Client Closed")},r.onmessage=function(e){console.log(["Received ee: ",e]),"string"===typeof e.data&&(console.log("Received: '"+e.data+"'"),A(),h.hasOwnProperty("speaking")&&h.message(e.data))},h.hasOwnProperty("microphoneStart")&&h.microphoneStart()}function O(t,n){for(var o="default",a={},l=0;l!==t.length;++l){var c=t[l];"audioinput"===c.kind&&(a[c.label]=c.deviceId,c.label&&-1!==c.label.toLowerCase().indexOf("speakerphone")&&(o=c.deviceId)),a.FINAL=o}console.log(["FOUND DEVICES ",a," USING ",o]),function(t){if(s)return;s=!0,console.log(["activate recording "]),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);try{navigator.getUserMedia?navigator.getUserMedia({audio:!0},(function(t){console.log(["activate recording success "]),d=new f,(m=d.createGain()).gain.value=1;var n=d.createMediaStreamSource(t);function o(e){if(e){for(var t=e.length,n=new Int16Array(t);t--;)n[t]=32767*Math.min(1,e[t]);return n.buffer}}var a=null,l=d.createScriptProcessor(4096,1,1);l.onaudioprocess=function(t){s&&i&&function(e,t,n){for(var o=new OfflineAudioContext(e.numberOfChannels,e.duration*e.numberOfChannels*t,t),a=o.createBuffer(e.numberOfChannels,e.length,e.sampleRate),r=0;r<e.numberOfChannels;r++)a.copyToChannel(e.getChannelData(r),r);var s=o.createBufferSource();s.buffer=e,s.connect(o.destination),s.start(0),o.oncomplete=function(e){var t=e.renderedBuffer.getChannelData(0);n(t)},o.startRendering()}(t.inputBuffer,16e3,(function(t){r&&r.readyState===r.OPEN&&s&&i?(a&&clearTimeout(a),b(e.from(o(t))),x()):(a||(a=setTimeout((function(){x(),A(),v()}),300)),b(e.from(o(t))))}))},m.connect(l),n.connect(m),l.connect(d.destination)}),(function(e){console.log(["dMIC Error capturing audio.",e])})):console.log("MIC getUserMedia not supported in this browser.")}catch(C){console.log(C)}}()}function S(e){console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)}function A(){i=!1,r&&r.close(),r=null,h.hasOwnProperty("microphoneStop")&&h.microphoneStop()}return navigator&&navigator.mediaDevices&&(navigator.mediaDevices.enumerateDevices().then((function(e){O(e)})).catch(S),function(){navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);try{navigator.getUserMedia?navigator.getUserMedia({audio:!0},(function(e){var t=p(e,{});t.on("speaking",(function(){clearTimeout(u),!0,h.hasOwnProperty("speaking")&&h.speaking()})),t.on("stopped_speaking",(function(){u=setTimeout((function(){clearTimeout(u),!1,h.hasOwnProperty("stopspeaking")&&h.stopspeaking()}),600)}))}),(function(e){console.log(["MIC Error capturing audio.",e])})):console.log("MIC getUserMedia not supported in this browser.")}catch(C){console.log(C)}}()),{stopAll:function(){w(),A()},bind:function(e,t){h[e]=t},unbind:function(e){delete h[e]},startMicrophone:E,stopMicrophone:A,startHotword:v,stopHotword:w}})}catch(m){}var f=window.meSpeak;function d(e){var t=Object(o.useRef)(null),n=(Object(o.useRef)(null),Object(o.useState)(!1)),i=n[0],p=n[1],d=(Object(o.useState)(!1),Object(o.useState)(null)),g=d[0],h=d[1],y=Object(o.useState)(null),v=y[0],w=y[1],b=Object(o.useState)(!1),x=b[0],k=b[1],E=Object(o.useState)([]),O=E[0],S=E[1],A=Object(o.useState)(null),C=A[0],M=A[1],R=Object(o.useState)(null),P=R[0],j=R[1],I=Object(o.useState)(""),N=I[0],L=I[1],T=Object(o.useState)({}),U=T[0],D=T[1],V=Object(o.useState)(0),H=V[0],J=V[1],B=e.currentSkill,W=null,_=Object(o.useState)(null)[1],F=null;function K(e){e&&(f&&f.stop(),W&&W.pause(),t&&t.current&&(t.current.pause(),M(null))),localStorage.setItem("mute_chat",!!e&&"true"),k(e)}function z(e){S(e),_(JSON.stringify(e)),localStorage.setItem("chat history",JSON.stringify(e))}function G(e){return new Promise((function(n,o){if("true"===localStorage.getItem("mute_chat"))n();else{var a=[];Array.isArray(e)&&e.map((function(e){e&&e.utterance&&a.push({text:e.utterance}),e&&Array.isArray(e.audio)&&e.audio.map((function(e){e.href&&"true"===e.autoplay&&a.push({audio:e.href,start:e.start,end:e.end})})),e&&Array.isArray(e.video)&&e.video.map((function(e){e.href&&"true"===e.autoplay&&a.push({video:e.href,start:e.start,end:e.end})}))})),function e(n){return new Promise((function(o,r){var s;"true"===localStorage.getItem("mute_chat")?o():a.length>0?(s=n[0],new Promise((function(e,n){var o;if("true"===localStorage.getItem("mute_chat"))e();else if(f&&f.stop(),s&&s.text)f?f.speak(s.text,{},(function(){e()})):e();else if(s&&s.audio)(W=new Audio(s.audio)).onended=function(){e()},W.onerror=function(){e()},W.onloadedmetadata=function(){s.start>0&&(W.currentTime=s.start)},W.ontimeupdate=function(){g.slot("audioPlayerCurrentTime",W.currentTime),s.end>0&&W.currentTime>s.end&&W.pause()},W.loop=!1,W.play();else if(s&&s.video){var a=s&&s.video?void 0!==(o=(o=s.video).split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?o[2].split(/[^0-9a-z_\-]/i)[0]:o[0]:"";if(a){var r=function(){j(null),e()};j({start:s.start,end:s.end,autostart:s.autostart,onEnd:r,onError:r,youtubeVideoId:a})}else M(s),t&&t.current?(t.current.onended=function(){M(null),e()},t.current.onerror=function(){M(null),e()},t.current.ontimeupdate=function(){g.slot("videoPlayerCurrentTime",t.current.currentTime),s.end>0&&t.current.currentTime>s.end&&t.current.pause()},t.current.play()):e()}else e()}))).then((function(){var t=n.slice(1);t.length>0&&!x?e(t).then((function(){o()})):o()})):o()}))}(a).then((function(){console.log("HAN spoken"),n()}))}}))}function Y(e,t){var n=t||g;console.log(["dm send msg",e,g]);var o=Array.isArray(O)?O:[];o.push({user:e,bot:[]}),z(o),window.scrollTo(0,0),n&&n.run&&(console.log(["dm send msg real",e]),n.run(e).then((function(e){console.log(["dm send msg real done",e]),L(" ")})))}function Z(e){j(null),M(null);var t=[];try{t=JSON.parse(localStorage.getItem("chat history"))}catch(m){console.log(m)}var n=t.length>0?t[t.length-1]:{user:"",bot:[]};n.user||(n.user="");var o=n&&n.bot?n.bot:[];return o.push(e),n.bot=o,t.length>0?t[t.length-1]=n:t.push(n),z(t),G([e])}function Q(){return z([]),p(!1),new Promise((function(e,t){z([]);var n=l()(B||{});n.handleBotMessage=Z,h(n),p(!0),console.log(["TRAIN dm set ready "]),n.init().then((function(t){p(!0),console.log(window.WebsocketAsrClient);var o={};function a(){D({border:"1px solid green",backgroundColor:"lightgreen"})}function r(){D({border:"1px solid red",backgroundColor:"lightpink"})}o.server="wss://api.opennludata.org:5000/",(F=new window.WebsocketAsrClient(o)).bind("message",(function(e){console.log(["MESSAGE",e]),Y(e,n)})),F.startHotword(),r(),w(F),F.bind("hotwordDetected",(function(){a()})),F.bind("microphoneStart",(function(){a(),J(3)})),F.bind("hotwordStart",(function(){r(),J(2)})),F.bind("hotwordStop",(function(){D({border:"1px solid red",backgroundColor:"grey"}),J(1)})),F.bind("microphoneStop",(function(){r(),J(2)})),F.bind("speaking",(function(){3==H&&a()})),F.bind("stopspeaking",(function(){3==H&&D({border:"1px dashed green",backgroundColor:"lightgreen"})})),e([])}))}))}Object(o.useEffect)((function(){var e=localStorage.getItem("mute_chat");k("true"===e)}),[]),Object(o.useEffect)((function(){B&&Q()}),[B]);var X={position:"relative",backgroundColor:"grey",border:"2px solid black",borderRadius:"2em",height:"3em",width:"3em",textDecoration:"none",outline:"none",padding:"0.2em"},q={position:"relative",backgroundColor:e.color?e.color:"grey",border:"2px solid black",borderRadius:"2em",height:"3em",width:"3em",textDecoration:"none",outline:"none"};return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},a.a.createElement("div",{style:{backgroundColor:"lightgrey",position:"fixed",top:0,left:0,width:"100%",border:"2px solid black",padding:"0.3em"}},a.a.createElement("input",{type:"text",style:{marginRight:"1em",width:"75%"},value:N,placeholder:0===O.length?"Start a conversation":"",onKeyUp:function(e){13===e.keyCode&&N.trim().length>0&&(Y(N),L(""))},onChange:function(e){L(e.target.value)}}),a.a.createElement(u,{onClick:function(e){console.log(["TOGGLEVOIC",H,v]),v&&(3===H?(v.stopMicrophone(),v.startHotword()):2===H?(v.stopHotword(),v.startMicrophone()):(v.stopMicrophone(),v.startHotword()))},style:Object.assign({},q,U),onMessage:function(e){L(e),Y(e)}}),!x&&a.a.createElement(r.a,{variant:"primary",style:Object.assign({},X,{marginLeft:"1em",backgroundColor:"#90ee9024",borderColor:"green"}),onClick:function(e){K(!0)}},a.a.createElement("div",{style:{position:"relative",width:"90%",top:"-0.4em",left:"-0.1em"}},a.a.createElement("svg",{viewBox:"0 0 31 31"},a.a.createElement("g",{stroke:"black",strokeWidth:"1",fill:"none",fillRule:"evenodd",id:"g8"},a.a.createElement("path",{style:{fill:"#000000",fillRule:"evenodd",stroke:"none",strokeWidth:1},id:"path6",d:"M 6.0093689,15.068946 H 7.9906311 C 8.5480902,15.068946 9,15.504817 9,16.044457 v 7.847427 c 0,0.53876 -0.4433532,0.975512 -1.0093689,0.975512 H 6.0093689 C 5.4519098,24.867396 5,24.431524 5,23.891884 v -7.847427 c 0,-0.53876 0.4433532,-0.975511 1.0093689,-0.975511 z m 4.8355181,-0.526819 8.46047,-5.2754227 C 20.241282,8.6831193 21,9.088977 21,10.174567 v 19.587207 c 0,1.084984 -0.791093,1.541729 -1.755146,1.02648 L 10.881582,26.318412 C 10.394698,26.058191 10,25.411369 10,24.871729 v -8.827272 c 0,-0.53876 0.378645,-1.211611 0.844887,-1.50233 z"}))))),x&&a.a.createElement(r.a,{variant:"primary",style:Object.assign({},X,{marginLeft:"1em",backgroundColor:"#fcbfcb3d",borderColor:"red"}),onClick:function(e){K(!1)}},a.a.createElement("div",{style:{position:"relative",width:"90%",top:"-0.4em",left:"-0.1em"}},a.a.createElement("svg",{viewBox:"0 0 31 31"},a.a.createElement("g",{stroke:"black",strokeWidth:"1",fill:"none",fillRule:"evenodd",id:"g8"},a.a.createElement("path",{d:"M26.8890873,18.5748798 L24.4142136,16.1000061 L23,17.5142197 L25.4748737,19.9890934 L23,22.4639671 L24.4142136,23.8781807 L26.8890873,21.403307 L29.363961,23.8781807 L30.7781746,22.4639671 L28.3033009,19.9890934 L30.7781746,17.5142197 L29.363961,16.1000061 L26.8890873,18.5748798 Z M6.0093689,15.0689455 L7.9906311,15.0689455 C8.54809015,15.0689455 9,15.5048168 9,16.0444571 L9,23.8918841 C9,24.4306443 8.55664682,24.8673958 7.9906311,24.8673958 L6.0093689,24.8673958 C5.45190985,24.8673958 5,24.4315245 5,23.8918841 L5,16.0444571 C5,15.5056969 5.44335318,15.0689455 6.0093689,15.0689455 Z M10.8448866,14.5421268 L19.3053568,9.26670427 C20.2412824,8.68311934 21,9.08897697 21,10.1745672 L21,29.761774 C21,30.8467578 20.2089071,31.3035027 19.244854,30.788254 L10.8815817,26.3184118 C10.3946976,26.0581912 10,25.4113695 10,24.8717291 L10,16.0444571 C10,15.5056969 10.3786449,14.8328461 10.8448866,14.5421268 Z",fill:"#000000",id:"path6"}))))),P&&P.youtubeVideoId&&a.a.createElement("span",{style:{position:"relative",height:"3em",width:"3em",top:"0.7em",marginLeft:"1em"},onClick:function(e){j(null),M(null),W&&W.pause(),W=null}},a.a.createElement("svg",{viewBox:"0 0 34 34 ",x:"0px",y:"0px",style:{height:"3em",width:"3em"}},a.a.createElement("path",{d:"M 21.000009,30.000009 H 9.0000085 a 0.5,0.5 0 0 1 -0.35,-0.15 l -8.49999997,-8.49 A 0.5,0.5 0 0 1 8.527757e-6,21.000009 V 9.0000085 A 0.5,0.5 0 0 1 0.15000853,8.6500085 L 8.6400085,0.15000853 a 0.5,0.5 0 0 1 0.36,-0.150000002243 H 21.000009 a 0.5,0.5 0 0 1 0.35,0.150000002243 l 8.49,8.48999997 a 0.5,0.5 0 0 1 0.16,0.36 V 21.000009 a 0.5,0.5 0 0 1 -0.15,0.35 l -8.49,8.49 a 0.5,0.5 0 0 1 -0.36,0.16 z m -11.8000005,-1 H 20.800009 l 8.2,-8.2 V 9.2000085 l -8.2,-8.2 H 9.2000085 l -8.2,8.2 V 20.800009 Z",id:"path4617",style:{fill:"#fa0010",fillOpacity:1,imageRendering:"auto",stroke:"#dc2500",strokeOpacity:1,opacity:1,strokeWidth:1.8,strokeMiterlimit:4,strokeDasharray:"none"}}),a.a.createElement("text",{style:{fontStyle:"normal",fontWeight:"normal",fontSize:"10.79994011px",lineHeight:1.25,fontFamily:"sans-serif",letterSpacing:"0px",wordSpacing:"0px",fill:"#000000",fillOpacity:1,stroke:"none",strokeWidth:.26999852},x:"3.4542296",y:"15.328075",id:"text5172",transform:"scale(0.75898724,1.3175452)"},a.a.createElement("tspan",{id:"tspan5170",x:"3.4542296",y:"15.328075",style:{fontStyle:"normal",fontVariant:"normal",fontWeight:"bold",fontStretch:"normal",fontSize:"10.79994011px",fontFamily:"sans-serif",fontVariantLigatures:"normal",fontVariantCaps:"normal",fontVariantNumeric:"normal",fontFeatureSettings:"normal",textAlign:"start",writingMode:"lr-tb",textAnchor:"start",strokeWidth:.26999852}},"STOP"))))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null)),C&&a.a.createElement("div",null,a.a.createElement("br",null)," ",a.a.createElement("br",null)," ",a.a.createElement("video",{ref:t,id:"myVid",width:"100%"},a.a.createElement("source",{src:C}),"Sorry, your browser does not support HTML5 video.")),P&&P.youtubeVideoId&&a.a.createElement("div",{style:{width:"100%"}},a.a.createElement("br",null),a.a.createElement("br",null),"  ",a.a.createElement(s.a,{key:"yt-fs",videoId:P.youtubeVideoId,opts:{width:"100%",playerVars:{start:P.start,end:P.end,controls:1,autoplay:1}},onEnd:P.onEnd,onError:P.onError,onPause:P.onPause})),a.a.createElement(o.Fragment,null,a.a.createElement("span",{style:{display:i?"block":"none"}},a.a.createElement(c,{fullScreenVideo:C,fullScreenYoutube:P,jsonhistory:JSON.stringify(O),history:O,sendUserMessage:Y})),!i&&a.a.createElement("b",{style:{padding:"1em",marginTop:"5em"}},"Loading")))}}).call(this,n(155).Buffer)},145:function(e,t,n){var o=n(173);e.exports=o,window.voicedialogjs=o},147:function(e,t,n){e.exports=n(295)},148:function(e,t,n){},173:function(e,t,n){var o=n(174),a=a||{},r=r||null;a.gapi=r;var s=n(58).NeuralNetwork,i=n(179);a.searchYouTube=i;var l=n(190);e.exports=function(e){var t=[],r={},i=null,c={},u=e.utterances,p=null,f={},d=new s,m=null;function g(e){e&&e.name&&(t.push("intent "+e.name),Array.isArray(e.entities)&&e.entities.map((function(e){e.name&&(t.push("slot_"+e.name),r[e.name]=e.value)})))}function h(e){return new Promise((function(t,n){d.train(e),t()}))}function y(e){var t=[];return Array.isArray(e)&&e.length>0&&e.map((function(e){e.steps&&e.steps.map((function(n,o){if(o>0&&0===n.indexOf("utter ")||0===n.indexOf("action ")){var a=e.steps.slice(0,o),r=e.steps[o];t.push({input:w(a),output:w([r])})}}))})),t}function v(){var e=function(e){var t={};return e.map((function(e){return t[e]=1,null})),t}(t),n=d.run(e);if(n&&Object.keys(n).length>0){var o=Object.keys(n).map((function(e){return{next:e,score:n[e]}})).sort((function(e,t){return e.score>t.score?-1:1}));return o.length>0?o[0].next:""}return null}function w(e){var t={};return Array.isArray(e)&&e.length>0&&e.map((function(e){return t[e]=1,null})),t}function b(e,t){var n=JSON.parse(JSON.stringify(e));e&&e.synonym&&Object.keys(t).map((function(o){n.synonym=e.synonym.replace(new RegExp("{"+o+"}","g"),t[o])})),e&&e.buttons&&e.buttons.map((function(e,o){Object.keys(t).map((function(e){n.buttons[o].label=n.buttons[o].label?n.buttons[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.buttons[o].utterance=n.buttons[o].utterance?n.buttons[o].utterance.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.buttons[o].link=n.buttons[o].link?n.buttons[o].link.replace(new RegExp("{"+e+"}","g"),t[e]):""}))})),e&&e.texts&&e.texts.map((function(e,o){Object.keys(t).map((function(e){n.texts[o].label=n.texts[o].label?n.texts[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.texts[o].text=n.texts[o].text?n.texts[o].text.replace(new RegExp("{"+e+"}","g"),t[e]):""}))})),e&&e.images&&e.images.map((function(e,o){Object.keys(t).map((function(e){n.images[o].label=n.images[o].label?n.images[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.images[o].href=n.images[o].href?n.images[o].href.replace(new RegExp("{"+e+"}","g"),t[e]):""}))})),e&&e.audio&&e.audio.map((function(e,o){Object.keys(t).map((function(e){n.audio[o].label=n.audio[o].label?n.audio[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.audio[o].href=n.audio[o].href?n.audio[o].href.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.audio[o].start=n.audio[o].start?n.audio[o].start.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.audio[o].end=n.audio[o].end?n.audio[o].end.replace(new RegExp("{"+e+"}","g"),t[e]):""}))})),e&&e.video&&e.video.map((function(e,o){Object.keys(t).map((function(e){n.video[o].label=n.video[o].label?n.video[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.video[o].href=n.video[o].href?n.video[o].href.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.video[o].start=n.video[o].start?n.video[o].start.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.video[o].end=n.video[o].end?n.video[o].end.replace(new RegExp("{"+e+"}","g"),t[e]):""}))})),e&&e.frames&&e.frames.map((function(e,o){Object.keys(t).map((function(e){n.frames[o].label=n.frames[o].label?n.frames[o].label.replace(new RegExp("{"+e+"}","g"),t[e]):"",n.frames[o].href=n.frames[o].href?n.frames[o].href.replace(new RegExp("{"+e+"}","g"),t[e]):""}))}));var o=n&&n.synonym?n.synonym.split("\n"):[];if(n){var a=o.length>0?o[Math.floor(Math.random()*o.length)]:"";n.utterance=a}return n}function x(n,o="",a){var s=[];return new Promise((function(o,l){n&&n.slots&&Object.keys(n.slots).map((function(e){var o=n.slots[e];t.push("slot "+e),r[e]=o}));var c=n&&n.name?"intent "+n.name:"";"intent None"===c&&(c="intent fallback");var p=null;if(e.rules.map((function(e){if(!p&&Array.isArray(e.steps)&&e.steps.length>0&&0===e.steps[0].indexOf("intent ")){e.steps[0].slice(7);if(e.steps[0]===c){var n=!0;e.conditions&&e.conditions.length>0&&e.conditions.map((function(e){if(0===e.indexOf("is_conversation_start "))t.length>0&&(n=!1);else if(0===e.indexOf("has_slot ")){var o=e.slice(9);r.hasOwnProperty(o)&&null!==r[o]&&void 0!==r[o]||(n=!1)}else if(0===e.indexOf("active_form ")){var a=e.slice(12);i&&i.name===a||(n=!1)}})),n&&(p=e)}}})),p&&p.steps&&p.steps.length>0){t.push(c),function n(o,a,s,l){return new Promise((function(c,p){if(Array.isArray(a)&&a.length>0){var f=a[0];(function(n,o,a){var s=[];return new Promise((function(l,c){if(o&&0===o.indexOf("action ")){t.push(o);var p=o.slice(7);e.actions&&(e.actions[p],1)?R(n,p,a).then((function(e){l(e)})):l(s)}else if(o&&0===o.indexOf("utter ")){p=o.slice(6);if(u&&u[p]){t.push(o);var f=b(u[p],r);s.push(f),a?a(f).then((function(){l(s)})):l(s)}else l(s)}else if(o&&0===o.indexOf("form ")){p=o.slice(5);if(e.forms&&e.forms[p]){t.push(o),i={name:p};var d=[].concat(s,P(a));l(d)}else i=null,l(s)}else l(s)}))})(o,f,l).then((function(e){Array.isArray(e)&&e.map((function(e){s.push(e)})),f&&(0===f.indexOf("action ")||f.indexOf(!1)||f.indexOf(!1))?n(o,a.slice(1),s,l).then((function(e){c(s)})):c(s)}))}else c(s)}))}(n,p.steps.slice(1),s,a).then((function(e){o(e)}))}else if(i)o(P(n,a));else{g(n);var f=null;(function n(o,a,s){return new Promise((function(l,c){var p=v();!p||p===f||0!==p.indexOf("action ")&&0!==p.indexOf("utter ")&&0!==p.indexOf("form ")&&0!==p.indexOf("slot ")?l(a):(f=p,function(n,o,a){var s=[];return new Promise((function(l,c){if(0===o.indexOf("action "))e.actions&&"function"===typeof e.actions[o]?(t.push(o),e.actions[o](t,r,e).then((function(e,n){Array.isArray(n)&&n.map((function(e){t.push("slot "+e.name),r[e.name]=e.value})),Array.isArray(e)?e.map((function(n){var o="utter "+n;t.push(o);var a=b(u[n],r);e.push(a),l(e)})):l(e)}))):l(s);else if(o.indexOf(!1)){var p=o.slice(6);if(u&&u[p]){t.push(o);var f=b(u[p],r),d=Array.isArray(f)?f[Math.floor(Math.random()*f.length)]:"";Object.keys(r).map((function(e){d=d.replace(new RegExp("{"+e+"}","g"),r[e])})),d=d.replace(new RegExp("\\{.*\\}","g"),""),a?a(f).then((function(){l(s)})):l(s)}else l(s)}else if(0===o.indexOf("form ")){p=o.slice(5);e.forms&&e.forms[p]?(t.push(o),i={name:p},l(P(n,a))):(i=null,l(P(n,a)))}else l(s)}))}(p,s).then((function(e){!(p=v())||0!==p.indexOf("action ")&&0!==p.indexOf("utter ")&&0!==p.indexOf("form ")&&0!==p.indexOf("slot ")?l(e):n(o,e,s).then((function(e){l(e)}))})))}))})(s,a).then((function(e){o(e)}))}}))}function k(e,t){r[e]=t}function E(){t=[],r=[],i=null}function O(e,n){t=[],i=null}function S(){t.pop(),console.log(["back"])}function A(){console.log(["listen"])}function C(){console.log(["no listen"])}function M(e){e?(i={name:e},console.log(["form"])):i=null}function R(n,o,s){return new Promise((function(i,c){var p=[];try{var f={replaceMarkersInUtterance:b,axios:l},d=e&&e.actions&&e.actions[o]?e.actions[o]:{};if(d&&d.synonym){var m=new Function("intent","history","slots","config","handleBotMessage","utils","window","slot","reset","restart","back","listen","nolisten","form","\n                    var apis={}\n                    return new Promise(function(resolve,reject) {\n                        var output = []; \n                        //var slots = {};\n                        \n                        function response(utterance,forceSlots) {\n                        //console.log(['API RESPOSNE',utterance,slots,config.utterances,utterance])\n                            return new Promise(function(iresolve,ireject) {\n                                if (config.utterances[utterance])  {\n                                    var useSlots = {}\n                                    if (slots) Object.keys(slots).map(function(slot) {useSlots[slot] = slots[slot]})\n                                    if (forceSlots) Object.keys(forceSlots).map(function(slot) {useSlots[slot] = forceSlots[slot]})\n                                    //console.log(['API RESPOSNE merge slots',\n                                    //slots ? JSON.parse(JSON.stringify(slots)) : null,\n                                    //forceSlots ? JSON.parse(JSON.stringify(forceSlots)) : null, \n                                    //useSlots ? JSON.parse(JSON.stringify(useSlots)) : null\n                                    //])\n                                    \n                                    var templates = utils.replaceMarkersInUtterance(config.utterances[utterance],useSlots)\n                                    //console.log(['API RESPOSNE have utt',templates,handleBotMessage])\n                                    output.push(templates)\n                                    if (handleBotMessage) {\n                                        //console.log(['API HAN RESPOSNE hbm',JSON.parse(JSON.stringify([utterance,templates,slots])) ])\n                                        handleBotMessage(templates).then(function() {\n                                            //console.log(['API RESPOSNE hbm DONE',slots,output])\n                                            iresolve()\n                                        })\n                                    } else {\n                                        iresolve()\n                                    }\n                                } else {\n                                //console.log(['API RESPOSNE NO utt'])\n                                    iresolve()\n                                }\n                            })\n                                \n                        }\n                        function api(apiKey) {\n                            var final = {}\n                            if (apiKey && apiKey.trim() && config && config.apis.hasOwnProperty(apiKey) && config.apis[apiKey].synonym && config.apis[apiKey].synonym.trim()) {\n                                var apiInstance = null \n                                if (apis[apiKey]) {\n                                    apiInstance = apis[apiKey]\n                                } else {\n                                    try {\n                                        apiInstance = new Function('intent','history','slots','config','utils','window','slot','response','api','reset','restart','back','listen','nolisten','form', config.apis[apiKey].synonym.trim())\n                                        \n                                    } catch (e) {\n                                        console.log(e)\n                                    }\n                                }\n                                var final = {}\n                                try {\n                                    if (typeof apiInstance === 'function') {\n                                        final = apiInstance(intent,history,slots,config,utils, window,slot,response,api,reset,restart,back,listen,nolisten,form) \n                                    }\n                                } catch (e) {\n                                    console.log(e)\n                                }\n                            }\n                            return final\n                        }\n                        \n                         try {\n                        "+d.synonym+"\n                        } catch (e) {\n                            console.log(e)\n                        }\n                       \n                    })\n                ")(n,t,r,e,s,f,a,k,E,O,S,A,C,M);m.then?m.then((function(e,n){Array.isArray(n)&&n.map((function(e){t.push("slot "+e.name),r[e.name]=e.value})),Array.isArray(e)&&e.map((function(n){var o="utter_"+n.value;if(t.push(o),u.hasOwnProperty(n.value)){var a=b(u[n.value],r);e.push(a)}else console.log("Response "+n.value+" non found")})),i(e)})):(console.log("An action function must return a promise"),i(p))}else"listen"===o?A():"nolisten"===o?C():"reset"===o?E():"restart"===o?O():"back"===o&&S(),i(p)}catch(g){console.log(g),i(p)}}))}function P(t,n){return new Promise((function(o,a){var s=[],l=!0,c=null;if(i&&i.name&&e.forms&&e.forms.hasOwnProperty(i.name)&&e.forms[i.name]){var u=e.forms[i.name];if(Array.isArray(u.slots)&&u.slots.map((function(e){var n=!1;Array.isArray(e.capturefrom)&&e.capturefrom.map((function(e){"from entity"===e.type&&e.entity?t.entities&&t.entities.map((function(t){t.entity&&t.entity===e.entity&&(i.data=i.data?i.data:{},i.data[t.entity]=t.option,n=!0)})):e.entity&&"from text"===e.type&&p&&p.trim()?(i.data=i.data?i.data:{},i.data[e.entity]=p,n=!0):t.intent&&"from intent"===e.type&&e.value&&Array.isArray(e.intent)?-1!==e.intent.indexOf(t.intent)&&(i.data=i.data?i.data:{},i.data[e.entity]=e.value,n=!0):"from trigger intent"===e.type&&-1!==e.intent.indexOf(t.intent)&&(i.data=i.data?i.data:{},i.data[e.entity]=e.value,n=!0)})),n||c||(c=e.text),l=l&&n})),l)i=null,u&&u.finished?R(t,u.finished,n).then((function(e){o(e)})):o(s);else if(e.utterances[c]){var f=b(e.utterances[c],r);s.push(f),n?n(f).then((function(){o(s)})):o(s)}else o(s)}else o(s)}))}return{init:function(){var t=this;return new Promise((function(a,r){function i(e){e?x({name:"welcome"},"",t.handleBotMessage).then((function(e){a(e)})):a([])}var l=!1;Array.isArray(e.rules)&&e.rules.map((function(e){Array.isArray(e.steps)&&e.steps.length>0&&0===e.steps[0].indexOf("intent ")&&(c[e.steps[0]+(e.conditions?JSON.stringify(e.conditions):"")]=e,"welcome"===e.steps[0].slice(7)&&(l=!0))})),n(207)().then((function(t){(m=t).train(e).then((function(){e.json&&Object.keys(e.json).length>0?(o("model"),(d=new s).fromJSON(e.json),i(l)):e.corpus&&Object.keys(e.corpus).length>0?h(e.corpus).then((function(){i(l)})):e.stories&&Object.keys(e.stories).length>0||e.rules&&Object.keys(e.rules).length>0?h(y(e.stories)).then((function(){i(l)})):a("no training data")}))}))}))},pushIntent:g,pushEntity:function(e){e.name&&(t.push("slot "+e.name),r[e.name]=e.value)},pushAction:function(e){e.name&&t.push("action "+e.name)},pushUtterance:function(e){e.name&&t.push("utter "+e.name)},resetHistory:function(){t=[]},train:h,predict:v,arrayToWeights:w,run:function(e,t,n){var o=this;return new Promise((function(t,n){if("string"===typeof e){if(p=e,!m)throw new Error("Cannot handle string intent without a manager configured");try{m.process(e).then(n=>{f.name=n.intent,f.entities=n.entities,f.slots=n.slots,x(f,e,o.handleBotMessage).then((function(e){t(e)}))}).catch((function(e){console.log(e)}))}catch(a){console.log(a)}}else"object"===typeof e&&e.name&&e.name.trim()&&(p="",x(f=e,"",o.handleBotMessage).then((function(e){t(e)})))}))},fromStories:y,history:t,setHistory:function(e){t=e},slots:r,model:d,toJSON:function(){return{nlp:m.toJSON(),core:d.toJSON()}},manager:m,currentForm:i,slot:k}}},207:function(e,t,n){var o=n(1),a=n(2),r=n(209).containerBootstrap,s=n(217).Nlp,i=n(98).Ner,l=n(278).LangEn;function c(){return(c=a(o.mark((function e(){var t,n,c,u,p,f,d,m,g;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=function(){return(g=a(o.mark((function e(n){var a,r,s,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(["nlp process",n]),e.next=3,c.process("en",n);case 3:return a=e.sent,r={},s={},e.next=8,t.process({locale:"en",text:n});case 8:return i=e.sent,console.log(["nlp process if",a,u,i.entities]),a&&a.intent&&u.hasOwnProperty(a.intent)&&u[a.intent]&&Array.isArray(i.entities)&&(console.log(["nlp process if"]),Object.keys(u[a.intent]).map((function(e){console.log(["nlp process if",e,i]),i.entities.map((function(t){if(console.log(["nlp process if",t]),t.entity===e){console.log(["nlp process if match"]),s[e]=s[e]?parseInt(s[e])+1:0;var n=e;s[e]>0&&(n=e+"_"+s[e]),t.option&&(r[n]=t.option)}}))}))),console.log(["nlp process",a,i,r,u]),a.entities=i.entities,a.slots=r,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)},m=function(e){return g.apply(this,arguments)},d=function(){return{nlp:JSON.parse(c.export()),core:t.getRules(),intentEntities:u}},f=function(){return(f=a(o.mark((function e(n){var a,r;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},r={},!n.intents){e.next=7;break}return Object.keys(n.intents).map((function(e){var t=n.intents[e];if(Array.isArray(t)){t.map((function(t){var n=t.example;if(Array.isArray(t.entities)){var o=t.entities.sort((function(e,t){return e.start<t.start?-1:1})),s=0;o.map((function(t){r[t.type]=r[e]?r[e]:[],r[t.type].push({value:t.value}),u[e]=u[e]?u[e]:{},u[e][t.type]=1,n=n.slice(0,t.start+s)+"%"+t.type+"%"+n.slice(t.end+s);var o=t.end-t.start-(t.type.length+2);return s-=o,null}))}a[n]=e}))}})),Object.keys(a).map((function(e){var t=a[e];c.addDocument("en",e,t)})),e.next=7,c.train();case 7:Array.isArray(n.regexps)&&n.regexps.map((function(e){if(e.entity&&e.entity.trim())try{t.addRegexRule("en",e.entity,e.synonym)}catch(n){console.log(n)}})),n.entities&&n.entitiesData&&Object.keys(n.entities).map((function(e){var t=n.entities[e];r[e]=r[e]?r[e]:[],t.values&&t.values.map((function(t){r[e].push({value:t})})),t.lists&&t.lists.map((function(t){Array.isArray(n.entitiesData[t])&&n.entitiesData[t].map((function(t){r[e].push(t)}))}))})),Object.keys(r).map((function(e){var n=r[e];if(Array.isArray(n)){var o={},a={};n.map((function(e){return e.synonym&&e.synonym.trim()?(o[e.synonym]=o[e.synonym]?o[e.synonym]:[],o[e.synonym].push(e.value)):a[e.value]=1,null})),Object.keys(o).map((function(n){t.addRuleOptionTexts("en",e,n,[n]),t.addRuleOptionTexts("en",e,n,o[n])})),Object.keys(a).map((function(n){t.addRuleOptionTexts("en",e,n,[n])}))}}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},p=function(e){return f.apply(this,arguments)},t=new i,e.next=8,r();case 8:return(n=e.sent).use(s),n.use(l),(c=n.get("nlp")).settings.autoSave=!1,c.settings.autoLoad=!1,c.settings.forceNER=!0,c.addLanguage("en"),u={},e.abrupt("return",{train:p,process:m,toJSON:d});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports=function(){return c.apply(this,arguments)}},289:function(e,t,n){var o=n(290);PorcupineManager=function(e,t=!1){var n;return{start:function(a,r,s,i,l){(n=new Worker(e)).postMessage({command:"init",keywordIDs:a,sensitivities:r}),n.onmessage=function(e){e.data.ready?(console.log("WORKER MSG"),console.log(e.data),l()):s(e.data.keyword)},o.start([this],i,t)},processFrame:function(e){n.postMessage({command:"process",inputFrame:e})},stop:function(){o.stop(),n.postMessage({command:"release"})}}};try{e.exports=PorcupineManager}catch(a){}try{window.PorcupineManager=PorcupineManager}catch(a){}},290:function(e,t,n){var o=n(291),a=n(292);WebVoiceProcessor=function(){var e=!1;return{start:function(t,r,s=!1){navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{var i,l=new(window.AudioContext||window.webkitAudioContext),c=l.createMediaStreamSource(r),u=l.createScriptProcessor(4096,1,1);u.onaudioprocess=function(t){e&&i.postMessage({command:"process",inputFrame:t.inputBuffer.getChannelData(0)})},c.connect(u),u.connect(l.destination),(i=s?a(140):o(n(140))).postMessage({command:"init",inputSampleRate:c.context.sampleRate}),i.onmessage=function(e){t.forEach((function(t){t.processFrame(e.data)}))}}).catch(r),e=!0},stop:function(){e=!1,(void 0).postMessage({command:"reset"})}}}(),e.exports=WebVoiceProcessor;try{window.WebVoiceProcessor=WebVoiceProcessor}catch(r){}},293:function(e,t){var n={"Hey Edison":new Uint8Array([118,237,148,135,159,220,36,201,56,239,145,237,180,93,2,141,52,25,146,185,64,57,215,232,206,126,81,225,148,220,233,125,208,20,155,99,250,111,85,62,137,213,98,126,95,153,72,52,111,249,44,213,197,123,110,70,228,216,115,70,151,98,25,130,57,222,81,112,215,229,127,232,165,197,192,156,201,244,137,20,50,109,9,238,58,247,222,38,229,187,241,206,10,21,41,124,192,63,24,24,48,176,53,104,217,134,233,160,198,236,140,172,100,134,146,72,12,52,188,214,229,137,61,153,85,28,217,217,182,147,245,151,247,9,226,202,165,184,72,39,37,167,52,17,133,49,180,127,74,67,100,41,124,72,112,172,252,71,209,210,189,143,0,49,172,213,21,83,205,66,79,46,245,229,246,234,89,169,6,130,188,11,37,192,108,101,219,130,64,37,74,57,60,230,134,142,206,104,185,128,178,88,183,55,101,213,227,212,156,107,119,112,129,57,182,209,7,164,55,199,187,118,118,132,199,153,255,172,243,20,132,36,77,111,56,87,156,76,7,95,199,137,125,94,33,210,211,103,16,67,84,255,12,88,157,51,149,153,34,9,209,175,177,210,27,211,89,204,189,117,34,173,63,31,172,97,118,245,207,179,22,1,50,65,228,130,185,68,4,175,173,148,42,70,211,7,198,105,191,125,237,202,147,217,105,227,191,37,132,218,184,157,184,23,65,24,155,206,155,104,213,63,20,243,33,184,18,65,97,50,131,3,148,78,196,85,252,210,183,10,228,172,25,150,233,10,104,4,179,98,194,5,106,1,207,148,91,135,152,57,133,215,28,236,255,217,58,225,64,59,95,207,149,137,15,150,8,26,83,120,1,68,96,52,254,171,145,10,252,49,234,15,18,180,73,126,135,0,37,109,188,54,222,133,58,249,162,220,56,20,204,133,46,91,208,186,176,204,93,126,36,151,51,18,207,53,78,177,2,105,167,107,66,183,184,210,75,210,251,169,136,97,235,17,161,81,57,125,83,193,224,159,17,94,243,148,181,167,28,93,208,111,198,190,123,134,59,96,222,158,178,198,225,90,196,191,231,79,172,51,85,85,100,157,93,137,246,87,113,238,44,17,168,29,213,1,116,27,102,29,192,177,97,160,182,234,6,146,74,106,131,157,212,227,93,213,178,229,47,75,226,57,109,187,201,39,77,136,206,112,122,154,138,4,245,187,105,125,166,159,84,42,86,231,80,127,37,182,232,229,35,61,212,65,99,10,249,236,255,252,18,87,91,172,176,175,195,238,77,243,22,112,195,51,41,251,157,58,234,25,2,188,59,171,110,168,164,105,150,226,39,91,134,96,232,116,243,125,140,165,58,156,212,241,93,111,242,38,105,207,237,207,137,217,9,210,104,243,51,248,198,197,138,68,20,136,44,162,110,21,54,99,122,104,141,11,156,164,233,141,224,244,152,121,68,7,77,91,76,139,249,89,214,43,151,53,247,89,134,108,149,8,71,221,135,103,196,53,235,198,175,1,248,94,11,78,238,132,8,161,114,197,148,243,129,6,193,47,145,10,189,135,96,112,200,163,226,109,0,170,139,212,44,78,157,107,207,221,54,154,48,162,33,242,160,56,18,101,163,250,102,154,143,174,155,97,128,248,221,224,245,228,250,219,235,106,85,150,25,36,170,154,206,250,174,35,138,91,74,193,70,8,197,51,52,98,243,202,177,138,242,186,142,46,177,45,38,65,135,199,240,168,134,78,172,231,156,64,33,102,19,226,81,190,31,205,64,57,239,112,46,47,23,186,38,19,75,252,185,84,96,111,199,104,237,105,60,90,192,120,240,207,79,159,53,254,67,252,212,139,188,65,94,25,128,139,166,41,175,87,243,184,200,179,166,228,247,170,75,43,253,42,44,15,224,15,140,184,172,210,138,240,239,52,86,148,53,20,2,112,87,244,230,197,130,38,129,107,210,200,128,112,193,166,107,100,9,231,82,175,178,127,170,160,252,26,77,28,233,53,226,168,249,124,52,136,1,57,125,2,255,111,64,23,89,227,232,86,24,135,116,79,225,47,242,157,87,209,93,66,229,1,33,244,141,255,11,15,209,138,129,64,164,173,112,114,117,58,176,161,154,191,223,60,171,97,82,247,214,241,15,64,21,87,70,166,198,140,117,57,192,138,182,250,14,17,150,248,150,105,184,31,177,249,244,180,2,60,185,67,206,215,43,244,118,99,40,45,235,85,131,146,84,152,243,22,67,51,41,201,206,47,71,40,210,129,239,232,149,220,160,68,229,100,105,121,52,127,112,128,245,240,145,67,81,5,244,191,18,107,46,117,185,124,59,125,186,146,34,37,209,131,22,128,147,33,139,97,124,207,17,38,173,142,103,249,241,12,83,170,71,243,51,33,156,221,196,125,98,247,41,143,209,60,32,83,27,246,172,153,88,72,244,255,65,124,95,41,117,211,134,208,227,102,68,9,55,134,53,33,129,123,196,134,108,151,184,33,217,218,74,221,171,189,239,147,163,17,72,170,60,254,28,165,31,172,61,80,101,152,181,206,227,74,191,77,160,182,134,99,131,54,150,67,25,141,234,175,14,52,239,188,55,95,194,230,48,8,28,69,223,229,41,73,60,125,74,10,165,43,180,162,177,173,115,117,155,30,25,128,49,12,236,160,197,175,8,254,18,30,238,160,77,162,147,112,191,63,22,178,62,0,29,92,156,76,191,180,98,171,42,243,228,206,35,237,180,166,198,118,85,187,27,125,198,154,200,228,194,231,38,83,140,46,18,210,13,36,144,96,204,191,209,38,161,94,33,250,166,0,24,150,101,232,174,214,62,51,47,168,228,171,182,1,152,247,171,140,154,14,228,108,204,242,170,16,133,246,103,154,98,41,56,63,111,8,75,170,187,34,77,108,36,58,231,59,232,184,84,32,223,215,150,62,153,29,82,85,130,29,113,35,245,154,92,103,241,54,246,216,78,174,148,160,199,78,208,196,119,245,255,127,200,134,31,246,254,160,208,60,25,191,192,64,4,19,27,110,39,196,195,122,34,182,220,80,214,236,99,131,117,172,24,80,185,64,220,172,121,185,121,84,69,139,46,13,92,39,156,194,94,50,77,145,21,21,165,237,180,136,47,223,60,71,19,109,145,184,3,248,191,172,114,98,155,101,86,200,207,23,45,166,211,22,55,104,94,17,217,173,64,36,7,86,97,12,0,23,24,246,109,172,232,134,136,194,82,172,18,189,71,158,138,246,182,101,110,151,214,210,64,192,192,76,46,107,78,35,39,144,95,74,224,100,85,174,249,52,26,174,23,236,248,145,120,180,111,58,157,60,172,16,89,250,124,131,165,10,33,99,200,48,123,234,89,214,92,212,106,175,226,190,202,109,7,105,142,176,20,132,162,115,142,207,135,72,251,238,87,17,123,53,234,63,100,223,238,120,176,57,143,171,0,64,239,56,30,64,23,133,36,254,228,189,233,56,104,37,216,16,24,218,108,180,33,67,176,251,168,169,108,90,61,100,106,14,231,147,213,63,77,188,176,50,162,234,218,116,54,96,172,129,127,2,134,180,3,157,160,238,129,124,5,198,86,156,65,196,93,8,55,18,83,213,195,238,18,154,211,126,150,39,46,165,7,181,11,196,208,8,73,100,93,67,170,125,86,34,72,209,116,14,224,140,167,63,132,221,161,252,2,219,50,160,28,146,110,192,105,90,69,91,183,115,55,213,161,64,95,243,87,7,164,87,69,179,61,18,71,44,92,188,224,49,146,218,182,41,90,211,101,213,212,103,208,38,106,118,12,92,180,31,97,211,0,169,206,29,233,61,126,190,146,198,160,225,119,88,7,199,49,150,86,105,73,52,246,189,66,19,134,228,18,86,174,11,178,241,229,246,186,194,207,168,228,34,134,221,42,134,238,124,197,30,63,12,233,60,98,195,151,198,64,168,83,130,207,220,136,66,183,118,126,108,193,3,246,249,26,147,96,68,177,80,227,158,167,0,46,115,136,53,142,94,219,223,99,165,34,80,26,49,45,40,230,241,190,228,77,5,96,1,99,88,113,82,17,17,241,159,231,72,29,103,195,90,80,53,233,78,207,218,39,4,149,96,214,90,194,50,248,0,41,91,70,172,154,34,214,147,227,26,162,234,86,74,184,240,8,80,23,204,158,244,128,92,18,202,135,35,3,49,222,99,24,68,146,127,255,251,178,104,187,85,15,198,104,204,205,218,88,91,42,157,89,142,76,128,147,110,247,96,65,113,19,78,65,95,218,127,234,57,28,197,6,121,254,71,192,71,47,94,100,75,145,130,144,225,23,149,93,235,13,147,129,188,122,149,126,217,103,198,248,239,23,138,100,141,20,82,176,58,172,206,234,118,213,216,193,100,132,186,255,102,11,20,228,19,135,161,110,56,25,40,230,71,124,106,197,168,4,211,36,97,34,242,40,11,252,36,5,145,230,5,72,46,193,195,236,165,108,191,3,68,55,22,11,86,215,170,33,174,4,28,205,139,246,227,171,70,101,59,113,150,152,10,206,149,199,143,106,27,250,11,111,234,172,131,9,25,214,105,11,91,254,19,133,129,239,179,14,121,86,78,68,95,75,45,24,10,185,23,93,81,178,115,236,223,152,76,2,42,161,61,253,137,222,82,78,94,124,138,178,49,203,32,234,125,96,97,31,29,146,193,230,103,169,16,26,176,161,140,236,44,199,242,107,37,167,244,65,239,185,52,108,125,124,229,193,176,165,17,148,206,31,171,57,135,247,22,177,44,11,66,99,48,68,13,70,187,138,45,219,129,3,85,28,157,241,250,231,136,212,206,152,123,252,14,19,111,16,220,88,27,66,244,137,208,131,220,155,151,254,96,166,171,255,251,53,207,32,54,202,69,172,192,159,39,26,139,97,53,13,50,23,61,230,139,69,130,76,240,185,223,73,110,47,47,212,133,192,219,207,145,96,32,35,29,186,176,179,113,220,88,58,171,37,14,23,82,43,236,249,204,194,34,38,0,227,176,83,196,122,66,171,106,14,116,104,203,110,178,248,93,44,183,192,50,4,236,35,184,221,24,106,152,113,19,89,75,182,76,12,251,76,18,42,160,35,182,148,29,184,32,148,13,30,109,105,65,36,60,131,245,27,116,61,54,252,244,145,217,215,138,41,205,110,156,2,192,199,125,98,21,168,128,246,90,138,42,94,180,6,26,241,15,224,141,231,197,103,57,199,176,247,12,244,240,228,95,7,59,29,206,68,201,73,253,40,168,97,52,84,116,114,241,32,39,85,52,254,13,47,231,223,30,201,84,14,6,226,218,66,194,20,43,103,174,91,49,127,89,10,115,222,198,250,231,172,136,14,96,169,66,165,202,108,64,21,7,255,229,35,2,14,151,32,0,23,5,30,147,100,149,121,52,27,140,48,206,197,94,147,22,6,65,129,74,116,214,46,236,96,23,144,151,62,48,72,158,185,103,184,240,193,221,151,113,207,72,208,235,78,36,196,103,108,202,149,81,33,13,118,211,129,125,142,232,255,221,195,9,214,171,38,196,72,233,252,105,12,67,161,242,53,202,90,191,26,189,234,70,34,153,117,101,43,206,22,115,217,245,64,43,126,60,148,228,121,253,94,185,154,153,221,88,78,226,207,45,54,66,38,21,89,251,212,225,183,90,81,227,204,127,95,204,143,198,78,132,162,215,219,117,225,76,177,13,103,18,17,72,13,51,107,255,252,218,216,237,55,254,126,65,11,115,142,16,47,7,42,227,220,249,152,79,213,190,161,214,74,119,59,34,204,212,87,198,44,2,218,77,248,202,33,33,198,85,45,246,69,219,117,168,250,254,244,89,79,241,11,105,109,55,254,146,35,87,133,49,174,68,107,215,159,40,140,76,208,201,202,248,142,27,39,130,29,239,245,179,241,143,40,113,222,184,28,250,42,233,138,64,109,146,132,142,99,66,4,36,23,24,178,128,228,190,88,106,180,245,21,30,27,8,197,63,166,223,217,201,70,218,243,18,205,199,2,58,222,69,230,238,222,54,58,140,200,251,58,165,26,51,129,225,158,85,250,107,211,133,54,146,214,131,134,157,111,238,255,166,39,237,77,232,63,52,189,69,50,90,171,153,2,153,12,163,255,121,175,101,34,86,119,172,73,175,186,23,171,214,21,65,243,134,120,95,189,92,94,52,65,126,50,79,168,164,202,227,59,109,28,37,121,208,253,194,96,47,14,34,95,65,67,180,252,246,58,163,117,186,230,248,30,246,55,101,193,136,183,168,183,199,59,117,41,33,199,237,64,14,201,215,221,157,176,46,235,27,255,242,31,35,243,213,100,226,137,107,107,88,251,208,187,181,91,43,99,79,179,108,140,63,176,138,82,10,160,200,118,89,166,10,225,224,209,215,108,119,51,237,85,16,136,107,239,7,149,199,219,30,6,75,94,228,216,153,179,36,226,33,25,118,208,60,45,138,168,190,127,83,88,168,86,234,30,112,127,28,142,247,202,245,185,203,47,117,148,81,113,120,16,38,7,229,246,58,40,114,56,135,35,198,110,45,0,149,34,178,169,61,42,95,50,128,98,94,53,59,55,41,0,60,6,17,164,142,196,235,222,91,187,214,136,164,51,232,57,234,202,199,105,137,134,185,69,3,81,211,132,65,255,175,47,109,18,51,72,123,40,64,177,54,174,163,187,108,208,173,137,124,245,168,195,221,169,88,46,3,133,157,165,203,162,105,150,46,38,153,113,201,22,254,183,17,183,94,119,192,99,150,130,240,198,132,249,46,78,165,5,193,6,152,165,28,164,91,165,58,47,62,200,57,14,5,106,129,85,135,190,239])};e.exports=n},294:function(e,t){e.exports={id:"5f9f9ca1765669f74d87c048",title:"image search",invocation:"",entities:{imageSearch:{values:["factory","flock of seagulls","galaxies","jlkj4lkj","kittens","mountain range","pigs","space station","sunset"]}},intents:{"show picture":[{example:"show me a picture of jlkj4lkj",entities:[{type:"imageSearch",value:"jlkj4lkj",start:21,end:29}]},{example:"show me a factory",entities:[{type:"imageSearch",value:"factory",start:10,end:17}]},{example:"do you have a picture of a flock of seagulls",entities:[{type:"imageSearch",value:"flock of seagulls",start:27,end:44}]},{example:"find pictures of a mountain range",entities:[{type:"imageSearch",value:"mountain range",start:19,end:33}]},{example:"show me photos of sunset",entities:[{type:"imageSearch",value:"sunset",start:18,end:24}]},{example:"i want to see some kittens",entities:[{type:"imageSearch",value:"kittens",start:19,end:26}]},{example:"show me pictures of pigs",entities:[{type:"imageSearch",value:"pigs",start:20,end:24}]},{example:"give me an image of a space station",entities:[{type:"imageSearch",value:"space station",start:22,end:35}]},{example:"show me pictures of galaxies",entities:[{type:"imageSearch",value:"galaxies",start:20,end:28}]}]},entitiesData:{},forms:{},actions:{"search unsplash":{id:"5f9f9d4970539919455a1cdc",value:"search unsplash",synonyms:"",tags:[],apis:[{text:"unsplash",functionCall:"showResults"}],synonym:"\nvar entities = intent && intent.slots ? intent.slots : {}\nvar criteria = entities['imageSearch'] ? entities['imageSearch'] : ''\n//console.log(['CROTEROA',criteria])\n\napi('unsplash').search(criteria).then(function(result) {\n    api('unsplash').showResults().then(function(result) {\n        resolve(output,slots)\n    })\n    \n})\n\n",responses:[{text:"search unsplash waiting"}]}},apis:{unsplash:{id:"5f9fde2da3b40678386bdb4a",value:"unsplash",synonym:"console.log(['unsplash api',window])\n\n\nvar apiKey=\"rdQcxo3iExmblvSDF16A8gBMc5zXQLgk3yEkXk7FFks\"\n\n\nfunction search(criteria, limit=5 ,skip=0) {\n    slot('criteria',criteria)\n        console.log(['API SEARCH CRITERIA',criteria])\n            //+ (skip > 0 ? '&page='+skip/(limit>0 ? limit : 1) : '') +(limit > 0 ? '&per_page='+limit : '') \n    return new Promise(function(resolve,reject) {\n        if (!criteria) {\n            response('unsplash what do you want to see').then(function() {resolve()})\n        } else {\n            response('search unsplash waiting').then(function() {\n                var url='https://api.unsplash.com/search/photos/?client_id='+apiKey+'&per_page=5&query='+criteria ;\n                console.log(url)\n                utils.axios.get(url).then(function(res) {\n                    //console.log(['UNSP RES'])\n                    console.log(['UNSP RES',res])\n                    if (res && res.data && Array.isArray(res.data.results) && res.data.results.length > 0) { \n                        slot('unsplashResults',JSON.stringify(res && res.data && res.data.results  ? res.data.results : []))\n                        resolve(res)  \n                    } else {\n                        response('unsplash not found').then(function() {resolve()})\n                    }\n                })\n            })\n        }\n       //resolve()\n    })\n}\n\n\nfunction showResults() {\n    console.log(['SHOW RES',slots['unsplashResults']])\n    \n    var results= []\n    try {\n        if (slots['unsplashResults']) results = JSON.parse(slots['unsplashResults'])\n    } catch (e) {\n        console.log(e)\n    }\n    return new Promise(function(resolve,reject) {\n        console.log(['PICS',results]);\n        if (Array.isArray(results)) {\n            var promises = []\n            results.map(function(result) {\n                console.log(['PIC',result]);\n                if (result && result.urls && result.urls.regular) {\n                    console.log(['PIC',result.urls.regular]);\n                    promises.push(response('show unsplash images',{unsplashImage: result.urls.regular}))\n                }\n            })\n           // slot('playingYoutubeVideo','https://www.youtube.com/embed/'+ videos[0].id.videoId)\n            Promise.all(promises).then(function(allRes) {\n                resolve()\n            })\n        }\n    })\n} \n\nreturn {\n     search: search, showResults: showResults\n}\n// return object containing api functions\nreturn {\n    test : function() {\n        console.log(test)\n     }\n}",tags:[],responses:[{text:"show unsplash images"},{text:"unsplash what do you want to see"},{text:"unsplash not found"}]}},utterances:{"unsplash not found":{id:"5fa07bc2ce3fd15548faad7a",value:"unsplash not found",synonym:"I couldn't find any images matching {criteria}",tags:[]},"unsplash what do you want to see":{id:"5fa079aff85b0facf559bffa",value:"unsplash what do you want to see",synonym:"what do you want to see ?",tags:[]},"search unsplash waiting":{id:"5f9fc6025cc8011bd7e4cb06",value:"search unsplash waiting",synonym:"loading",tags:[]},"show unsplash images":{id:"5f9f9f762d76166791c02d79",value:"show unsplash images",synonym:"",tags:[],buttons:[],images:[{label:"",href:"{unsplashImage}",youtubeVideoId:"{unsplashImage}",start:"",end:""}]},"i can show pictures":{id:"5f9f9d3282a50b5486b11ef3",value:"i can show pictures",synonym:"",tags:[],buttons:[{label:"show me pictures of the space station",utterance:"",link:""},{label:"i want to see some kittens",utterance:"",link:""},{label:"show me pictures of pigs",utterance:"",link:""},{label:"show me a mountain range",utterance:"",link:""},{label:"photo of a flock of seagulls",utterance:"",link:""},{label:"show me a picture of jlkj4lkj",utterance:"",link:""}]}},rules:[{rule:"welcome",steps:["intent welcome","utter i can show pictures"]},{rule:"show me pictures",steps:["intent show picture","action search unsplash"]}]}},295:function(e,t,n){"use strict";n.r(t);n(148);var o=n(0),a=n.n(o),r=n(141),s=n.n(r),i=n(142),l=n(294);window.skill&&(l=window.skill),console.log(["CHAT APP ",l]);var c=()=>a.a.createElement("div",null,a.a.createElement(i.a,{currentSkill:l,isFullScreen:!0}));s.a.render(a.a.createElement(c,null),document.getElementById("root"))}},[[147,1,2]]]);